

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Code Documentation &mdash; Is your VPN trustworthy 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Are VPNs Safe?" href="AreVPNsSafe.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Is your VPN trustworthy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="AreVPNsAnonymus.html">Are VPNs Anonymous</a></li>
<li class="toctree-l1"><a class="reference internal" href="AreVPNsSafe.html">Are VPNs Safe?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#js-injection-example">JS Injection Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-src.flask_server.server">Flask Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-src.js_crawlers.js_crawlers.spiders.myspider">Spiders</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Is your VPN trustworthy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Code Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/code_documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="code-documentation">
<h1>Code Documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h1>
<p>In this page you will find the domunetation of the tools used and created in this project.</p>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="#js-injection-tag"><span class="std std-ref">JS Injection Example</span></a>.</dt><dd><ul>
<li><p><a class="reference internal" href="#flask-server-tag"><span class="std std-ref">Flask Server</span></a> (Not used).</p></li>
<li><p><a class="reference internal" href="#spiders-tag"><span class="std std-ref">Spiders</span></a>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="js-injection-example">
<span id="js-injection-tag"></span><h2>JS Injection Example<a class="headerlink" href="#js-injection-example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-src.flask_server.server">
<span id="flask-server"></span><span id="flask-server-tag"></span><h3>Flask Server<a class="headerlink" href="#module-src.flask_server.server" title="Permalink to this headline">¶</a></h3>
<p>Server for JS Injection example</p>
<p>Contains a minimal implementation of a web server, using Flask. The intention was to 
use this server to detect JS injection using a custom setup.</p>
<blockquote>
<div><p>CLIENT–MID_ROUTER–EMULATED_VPN–SERVER</p>
</div></blockquote>
<p>Where the EMULATED_VPN injected JS into the response to track the client. This could
be detected using the MID computer, that would analyze the HTTP traffic.</p>
<p>Right now, it is not used.</p>
<dl class="py function">
<dt id="src.flask_server.server.close_connection">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">close_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#close_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.close_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes connection to the db.</p>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.get_db">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">get_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#get_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.get_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a db connection, using sqlite3.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The db connection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.hello_name">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">hello_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#hello_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.hello_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple hello function, using a param</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – The name of the person/thing to greet</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘Hello &lt;name&gt;’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.hello_world">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">hello_world</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#hello_world"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.hello_world" title="Permalink to this definition">¶</a></dt>
<dd><p>A hello world function</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>“Hello world!”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.index">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Main page. Uses index.html template to load.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Index page, using the index.html file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.init_db">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">init_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#init_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.init_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads schema.sql file and runs it.</p>
<p>Useful for db initialization, given that no in memory database is used.</p>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.new_post">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">new_post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#new_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.new_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new post into the webserver.</p>
<p>Posts, as the form specifies, contain a title, a description and an image.</p>
</dd></dl>

<dl class="py function">
<dt id="src.flask_server.server.query_db">
<code class="sig-prename descclassname">src.flask_server.server.</code><code class="sig-name descname">query_db</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">one</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/flask_server/server.html#query_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.flask_server.server.query_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the given query on the db.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Query result, one or a list of rows.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src.js_crawlers.js_crawlers.spiders.myspider">
<span id="spiders"></span><span id="spiders-tag"></span><h3>Spiders<a class="headerlink" href="#module-src.js_crawlers.js_crawlers.spiders.myspider" title="Permalink to this headline">¶</a></h3>
<p>Crawler to download all the webpages from the top500 list.</p>
<p>In this module, all the list is crawled and dowloaded. This is run both in an 
environment with a VPN and in an environment without one. By downloading the pages, we 
want to find wether JS is being injected in them or not, and if the VPN is injecting 
it on us.</p>
<dl class="py class">
<dt id="src.js_crawlers.js_crawlers.spiders.myspider.MySpider">
<em class="property">class </em><code class="sig-prename descclassname">src.js_crawlers.js_crawlers.spiders.myspider.</code><code class="sig-name descname">MySpider</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/js_crawlers/js_crawlers/spiders/myspider.html#MySpider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.js_crawlers.js_crawlers.spiders.myspider.MySpider" title="Permalink to this definition">¶</a></dt>
<dd><p>Crawler implementation.</p>
<p>Each spider Scrapy launches executes, by default the method parse. This 
implementation is very simple, once it gets the page, it returns it. The list of 
webpages is obtained from the top500 from moz, mentioned above.</p>
<dl class="py method">
<dt id="src.js_crawlers.js_crawlers.spiders.myspider.MySpider.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/js_crawlers/js_crawlers/spiders/myspider.html#MySpider.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.js_crawlers.js_crawlers.spiders.myspider.MySpider.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the url and the html of the page, encapsulated in a Page object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="src.js_crawlers.js_crawlers.spiders.myspider.Page">
<em class="property">class </em><code class="sig-prename descclassname">src.js_crawlers.js_crawlers.spiders.myspider.</code><code class="sig-name descname">Page</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/js_crawlers/js_crawlers/spiders/myspider.html#Page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.js_crawlers.js_crawlers.spiders.myspider.Page" title="Permalink to this definition">¶</a></dt>
<dd><p>Our own Item object.</p>
<p>Scrapy can return Items from spiders. The item class has been adapted to our needs.</p>
</dd></dl>

<dl class="py function">
<dt id="src.js_crawlers.js_crawlers.spiders.myspider.get_website_list">
<code class="sig-prename descclassname">src.js_crawlers.js_crawlers.spiders.myspider.</code><code class="sig-name descname">get_website_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="_modules/src/js_crawlers/js_crawlers/spiders/myspider.html#get_website_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.js_crawlers.js_crawlers.spiders.myspider.get_website_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This method parses the document obtained from <a class="reference external" href="https://moz.com/top500">https://moz.com/top500</a> into a list 
object that contains the urls. The .csv file must use the ‘,’ character as 
separator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> – Path to the .csv file that contains the list.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of URLs, as strings.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="AreVPNsSafe.html" class="btn btn-neutral float-left" title="Are VPNs Safe?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Ismael de la Gracia Cobos

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>